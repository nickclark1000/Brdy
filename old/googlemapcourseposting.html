<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <link href="css/basic.css" rel="stylesheet" type="text/css" />
    <style type="text/css">
      html { height: 100% }
      body { height: 85%; margin: 0; padding: 0 }
      #map_canvas { height: 100% }
    </style>
    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDMEWbu-DxkBYqkZa-gNuaLPPoAm0CEHCM&sensor=false&libraries=drawing">
    </script>
   
    <script type="text/javascript">
    function initialize() {
        var mapOptions = {
          center: new google.maps.LatLng(43.667872,-79.715853),
          zoom: 16,
          mapTypeId: google.maps.MapTypeId.SATELLITE
        };
        var map = new google.maps.Map(document.getElementById("map_canvas"),mapOptions);
        
        var drawingManager = new google.maps.drawing.DrawingManager({
      		drawingMode: google.maps.drawing.OverlayType.POLYGON,
      		drawingControl: true,
      		drawingControlOptions: {
      		  position: google.maps.ControlPosition.TOP_CENTER,
      		  drawingModes: [google.maps.drawing.OverlayType.MARKER,
    							  google.maps.drawing.OverlayType.CIRCLE,
   							     google.maps.drawing.OverlayType.POLYGON,
    							  google.maps.drawing.OverlayType.POLYLINE]
    									  },
      		markerOptions: {
        		draggable: true
      			}
      
    		});    
        drawingManager.setMap(map);  
        
			// var html = "<table>" +
                 //"<tr><td>Name:</td> <td><input type='text' id='name'/> </td> </tr>" +
                 //"<tr><td></td><td><input type='button' value='Save & Close' onclick='saveData()'/></td></tr>";
						  		
        
    		google.maps.event.addListener(drawingManager,'overlaycomplete',function(marker) {
        			 
       	 	 var form =    $(".formstyle").clone().show();
       		 var infowindowcontent = form[0];
    			 var infowindow = new google.maps.InfoWindow({
            		content: infowindowcontent
        			}); 
        
				 google.maps.event.addListener(marker.overlay,'click',function() {
					infowindow.open(map,marker.overlay);   
   					}); 
   					
   						
		
				 infowindow.open(map,marker.overlay);
		   
			//when user clicks on the "submit" button
       		form.submit({name: "marker"}, function (event) {
            	//prevent the default form behavior (which would refresh the page)
            	event.preventDefault();
				
            	//put all form elements in a "data" object
          		var data = {
                	//name: $("input[name=name]", this).val(),
					name: $("input[name=inputName]", this).val(),
					//yardage: $("input[name=yardage]", this).val(),
                	yardage: $("input[name=inputYardage]", this).val(),
					//lat: event.data.marker.overlay.getPosition().lat(),	
                	lat: marker.overlay.getPosition().lat(), 
					//lon: event.data.marker.overlay.getPosition().lng()
                	lon: marker.overlay.getPosition().lng() 
            		};
            		//trace(data)		//**<--- What is this?
					
         		//send the results to the PHP script that adds the point to the database
				$.post("newCourse.php", data);
            	return false;
        	}); 		  
    	});
    }  
      
      google.maps.event.addDomListener(window,'load',initialize);
	</script>
      
  <header> 
	<div id="header_wrapper">
		<img class="logo" src="images/golf.jpg" alt="Golf club and ball">
		<nav>
			<ul>
				<li> Home </li>
				<li> About Us </li>			
			</ul>		
		</nav>
	</div>	
</header>
	<input type="text" placeholder="Enter course name..." size="50"/> <button> Search </button>
	<form class="formstyle" action="newCourse.php" method="post" style="display:none">
		<div>
    	Course Name: <input type="text" name="inputName" value=""/> <br />
    	Yardage: <input type="text" name="inputYardage" value=""/>
    	<br />
    	<input type="submit" name="submitBtn"/>
    	</div>
   </form>
    <div id="map_canvas" style="width:100%; height:100%"></div>
    
     <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
	<script src="bootstrap/js/jquery.js"></script>
    <script src="bootstrap/js/bootstrap-transition.js"></script>
    <script src="bootstrap/js/bootstrap-alert.js"></script>
    <script src="bootstrap/js/bootstrap-modal.js"></script>
    <script src="bootstrap/js/bootstrap-dropdown.js"></script>
    <script src="bootstrap/js/bootstrap-scrollspy.js"></script>
    <script src="bootstrap/js/bootstrap-tab.js"></script>
    <script src="bootstrap/js/bootstrap-tooltip.js"></script>
    <script src="bootstrap/js/bootstrap-popover.js"></script>
    <script src="bootstrap/js/bootstrap-button.js"></script>
    <script src="bootstrap/js/bootstrap-collapse.js"></script>
    <script src="bootstrap/js/bootstrap-carousel.js"></script>
    <script src="bootstrap/js/bootstrap-typeahead.js"></script>
    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?libraries=places,drawing&sensor=false"></script>
    <script src="js/jquery-1.8.2.js"></script>

  </body>
</html>